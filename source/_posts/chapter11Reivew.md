---
title: 微机复习第十一章
date: 2019-1-3 15:00:00
categories: review
tags: microcomputer
---
# 微型计算机接口技术
## Chapter 11

本章主要内容是可编程定时器/计数器 **8254芯片**

#### 8254芯片
有3个独立的16位计数器。  
系统地址最后两位A1 A0指定了寄存器类型：
1. 00 选中\#0号计数器  
2. 01 选中\#1号计数器  
3. 10 选中\#2号计数器  
4. 11 选中控制寄存器   

主要有三个功能：  
1. 日时钟中断(对应 **\#0** 号计数器)  
2. 存储器动态刷新(对应 **\#1** 号计数器)  
3. 发声系统声源(对应 **\#2** 号计数器)

要想使8254正常工作，需要按照一定的流程对他进行设置：  
1. 向控制寄存器写入控制字  
2. 向需要操作的计数器写入初值

#### 初值
计算公式为：

> N = f<sub>clk</sub> / f<sub>out</sub>  

初值范围：  
0000H～FFFFH 二进制数，最大为65536  
0000H～9999H BCD码，最大为9999

#### 控制字
共有8位  
| D7,D6 | D5,D4 | D3,D2,D1 | D0 |
| :---: | :---: | :------: | -- |
| **选中计数器**<br>00代表\#0号计数器<br>01代表\#1号计数器<br>10代表\#2号计数器<br>11&nbsp;代表控制寄存器      | **选择输入方式**<br>00代表锁存数据<br>01代表只输低8位<br>10代表只输高8位<br>11代表先低8位后高8位 | **选择工作方式**<br>6个不同的二进制数<br>代表对应的工作方式 | **选择输入数类型**<br>0代表二进制数类型<br>1代表BCD码数类型 |

> 工作方式中：方式0代表跃变信号; 方式2代表分频器; 方式3代表**方波发生器**;  
> **注意**：控制字必须写入到控制寄存器中  
